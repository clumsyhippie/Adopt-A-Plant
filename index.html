<html lang="en"><head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GROWI - Grow &amp; Care For Your Own Plant!</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap');
        
        body {
            font-family: 'Press Start 2P', cursive;
            background-image: url('Bkg.png');
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
            background-attachment: fixed;
            height: 100vh;
            margin: 0;
            padding: 0;
            display: flex;
            justify-content: center;
            align-items: center;
            background-color: #f0f0f0;
        }
        
        .device {
            position: relative;
            width: 450px;
            height: 750px;
            border-radius: 30px;
            background-color: #4CAF50; /* Default green color */
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.5);
            overflow: hidden;
            transition: background-color 0.5s;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 25px;
            image-rendering: pixelated;
            -webkit-font-smoothing: none;
            -moz-osx-font-smoothing: grayscale;
        }
        
        .device::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            border: 8px solid rgba(0, 0, 0, 0.2);
            border-radius: 30px;
            pointer-events: none;
            z-index: 10;
            box-shadow: inset 0 0 0 2px rgba(255, 255, 255, 0.2);
        }
        
        /* Heart pattern */
        .pattern-hearts {
            position: relative;
        }
        
        .heart {
            position: absolute;
            width: 20px;
            height: 20px;
            background-color: rgba(255, 255, 255, 0.5);
            transform: rotate(45deg);
            z-index: 0;
        }
        
        .heart::before,
        .heart::after {
            content: '';
            position: absolute;
            width: 20px;
            height: 20px;
            background-color: rgba(255, 255, 255, 0.5);
            border-radius: 50%;
        }
        
        .heart::before {
            top: -10px;
            left: 0;
        }
        
        .heart::after {
            top: 0;
            left: -10px;
        }
        
        /* Striped pattern */
        .pattern-striped {
            position: relative;
        }
        
        .pattern-striped::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-image: linear-gradient(45deg, 
                rgba(255, 255, 255, 0.3) 25%, 
                transparent 25%, 
                transparent 50%, 
                rgba(255, 255, 255, 0.3) 50%, 
                rgba(255, 255, 255, 0.3) 75%, 
                transparent 75%, 
                transparent);
            background-size: 30px 30px;
            z-index: 0;
            pointer-events: none;
            border-radius: 30px;
        }
        
        /* Polka dot pattern */
        .pattern-polka {
            position: relative;
        }
        
        .pattern-polka::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-image: radial-gradient(
                circle, 
                rgba(255, 255, 255, 0.4) 8px, 
                transparent 8px
            );
            background-size: 30px 30px;
            z-index: 0;
            pointer-events: none;
            border-radius: 30px;
        }
        
        .screen {
            width: 380px;
            height: 380px;
            background-color: #c3e6cb;
            border-radius: 15px;
            border: 10px solid #333;
            overflow: hidden;
            display: flex;
            flex-direction: column;
            position: relative;
            image-rendering: pixelated;
            z-index: 1;
        }
        
        .screen-content {
            flex: 1;
            display: flex;
            flex-direction: column;
            padding: 15px;
            position: relative;
            z-index: 1;
        }
        
        .status-bar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 12px; /* Increased from 8px to 12px */
            height: 30px; /* Added fixed height to ensure consistent space */
        }
        
        .water-container {
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .water-label {
            font-size: 10px;
            color: #333;
        }
        
        .water-bar {
            width: 120px;
            height: 18px;
            background-color: #ddd;
            border: 3px solid #333;
            position: relative;
        }
        
        .water-level {
            height: 100%;
            background-color: #4fc3f7;
            width: 25%;
            transition: width 0.5s;
        }
        
        .water-percentage {
            font-size: 10px;
            color: #333;
        }
        
        .growth-stage {
            font-size: 12px;
            background-color: #333;
            color: #fff;
            padding: 3px 8px;
            border-radius: 4px;
            white-space: nowrap; /* Prevent text wrapping */
            min-width: 90px; /* Ensure enough width for the text */
            text-align: center;
        }
        
        .plant-name {
            text-align: center;
            font-size: 14px;
            margin: 8px 0 12px 0; /* Increased bottom margin from 8px to 12px */
            background-color: #333;
            color: #fff;
            padding: 5px;
            border-radius: 4px;
        }
        
        .plant-container {
            flex: 1;
            display: flex;
            justify-content: center;
            align-items: center;
            position: relative;
        }
        
        .plant-image {
            max-width: 80%;
            max-height: 80%;
            object-fit: contain;
        }
        
        .plant-message {
            position: absolute;
            bottom: 10px;
            left: 0;
            right: 0;
            text-align: center;
            font-size: 12px;
            font-style: italic;
            background-color: rgba(51, 51, 51, 0.8);
            color: white;
            padding: 8px;
            border-radius: 6px;
            margin: 0 15px;
        }
        
        .buttons-container {
            width: 380px;
            display: flex;
            flex-direction: column;
            gap: 20px;
            margin-top: 25px;
            position: relative;
            z-index: 1;
        }
        
        .main-buttons {
            display: flex;
            justify-content: space-between;
            gap: 15px;
        }
        
        .secondary-buttons {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
        }
        
        .btn {
            padding: 12px;
            border: 4px solid #333;
            border-radius: 8px;
            font-size: 12px;
            text-align: center;
            cursor: pointer;
            transition: all 0.2s;
            box-shadow: 0 4px 0 #333;
        }
        
        .btn:active {
            transform: translateY(4px);
            box-shadow: 0 0 0 #333;
        }
        
        .btn-water {
            background-color: #4fc3f7;
            color: #333;
            flex: 1;
            padding: 15px 12px;
            font-size: 14px;
        }
        
        .btn-fertilize {
            background-color: #ffeb3b;
            color: #333;
            flex: 1;
            padding: 15px 12px;
            font-size: 14px;
        }
        
        .btn-fertilize.disabled {
            background-color: #aaa;
            cursor: not-allowed;
        }
        
        .btn-secondary {
            background-color: #9c27b0;
            color: white;
        }
        
        .power-button-container {
            width: 100%;
            display: flex;
            justify-content: center;
            margin-top: 25px;
            position: relative;
            z-index: 1;
        }
        
        .power-button {
            width: 65px;
            height: 65px;
            background-color: #e57373;
            border: 4px solid #333;
            border-radius: 50%;
            cursor: pointer;
            display: flex;
            justify-content: center;
            align-items: center;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.3);
        }
        
        .power-button:active {
            transform: scale(0.95);
        }
        
        .power-icon {
            width: 30px;
            height: 30px;
            position: relative;
        }
        
        .power-icon::before {
            content: '';
            position: absolute;
            top: 0;
            left: 50%;
            width: 3px;
            height: 15px;
            background-color: white;
            transform: translateX(-50%);
        }
        
        .power-icon::after {
            content: '';
            position: absolute;
            top: 0;
            left: 50%;
            width: 24px;
            height: 24px;
            border: 3px solid white;
            border-radius: 50%;
            transform: translateX(-50%);
            clip-path: polygon(0 15%, 100% 15%, 100% 100%, 0 100%);
        }
        
        .screen-off {
            background-color: #333;
        }
        
        .screen-off .screen-content,
        .screen-off .startup-screen,
        .screen-off .shutdown-screen {
            display: none !important;
        }
        
        .startup-screen, .shutdown-screen {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: #000;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            color: #0f0;
            z-index: 10;
        }
        
        .loading-bar-container {
            width: 80%;
            height: 25px;
            border: 3px solid #0f0;
            margin-top: 25px;
        }
        
        .loading-bar {
            height: 100%;
            background-color: #0f0;
            width: 0%;
        }
        
        .modal {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.8);
            display: none;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 20;
            padding: 15px;
            box-sizing: border-box;
        }
        
        .modal-content {
            background-color: #c3e6cb;
            border: 6px solid #333;
            border-radius: 12px;
            padding: 15px;
            width: 90%;
            max-height: 90%;
            overflow-y: auto;
            font-size: 10px;
        }
        
        .modal-title {
            text-align: center;
            margin-bottom: 15px;
            font-size: 14px;
            background-color: #333;
            color: white;
            padding: 8px;
            border-radius: 6px;
        }
        
        .modal-buttons {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-top: 15px;
        }
        
        .modal-btn {
            padding: 8px 15px;
            border: 3px solid #333;
            border-radius: 6px;
            font-size: 10px;
            cursor: pointer;
            background-color: #9c27b0;
            color: white;
        }
        
        .plant-option {
            display: flex;
            align-items: center;
            margin-bottom: 8px;
            cursor: pointer;
            padding: 8px;
            border-radius: 6px;
        }
        
        .plant-option:hover {
            background-color: rgba(0, 0, 0, 0.1);
        }
        
        .plant-option.selected {
            background-color: rgba(0, 0, 0, 0.2);
        }
        
        .color-wheel {
            width: 100%;
            height: 40px;
            margin: 15px 0;
            border-radius: 20px;
            border: 3px solid #333;
            background: linear-gradient(to right, 
                hsl(0, 100%, 85%), 
                hsl(60, 100%, 85%), 
                hsl(120, 100%, 85%), 
                hsl(180, 100%, 85%), 
                hsl(240, 100%, 85%), 
                hsl(300, 100%, 85%), 
                hsl(360, 100%, 85%)
            );
            -webkit-appearance: none;
            appearance: none;
            cursor: pointer;
        }
        
        .color-wheel::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 25px;
            height: 40px;
            background: white;
            border: 3px solid #333;
            border-radius: 12px;
        }
        
        .color-wheel::-moz-range-thumb {
            width: 25px;
            height: 40px;
            background: white;
            border: 3px solid #333;
            border-radius: 12px;
        }
        
        .pattern-options, .personality-options {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 8px;
            margin: 15px 0;
        }
        
        .pattern-option, .personality-option {
            padding: 8px;
            border: 3px solid #333;
            border-radius: 6px;
            text-align: center;
            cursor: pointer;
        }
        
        .pattern-option.selected, .personality-option.selected {
            background-color: #9c27b0;
            color: white;
        }
        
        .stats-item {
            margin-bottom: 8px;
            display: flex;
            justify-content: space-between;
        }
        
        .hidden {
            display: none;
        }
        
        .plant-animation {
            display: none;
        }
        
        .plant-static {
            display: block;
        }
        
        input[type="text"] {
            font-family: 'Press Start 2P', cursive;
            image-rendering: pixelated;
        }
        
        /* Heart pattern container */
        .heart-pattern {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 0;
            pointer-events: none;
        }
    </style>
<style>*, ::before, ::after{--tw-border-spacing-x:0;--tw-border-spacing-y:0;--tw-translate-x:0;--tw-translate-y:0;--tw-rotate:0;--tw-skew-x:0;--tw-skew-y:0;--tw-scale-x:1;--tw-scale-y:1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness:proximity;--tw-gradient-from-position: ;--tw-gradient-via-position: ;--tw-gradient-to-position: ;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width:0px;--tw-ring-offset-color:#fff;--tw-ring-color:rgb(59 130 246 / 0.5);--tw-ring-offset-shadow:0 0 #0000;--tw-ring-shadow:0 0 #0000;--tw-shadow:0 0 #0000;--tw-shadow-colored:0 0 #0000;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: ;--tw-contain-size: ;--tw-contain-layout: ;--tw-contain-paint: ;--tw-contain-style: }::backdrop{--tw-border-spacing-x:0;--tw-border-spacing-y:0;--tw-translate-x:0;--tw-translate-y:0;--tw-rotate:0;--tw-skew-x:0;--tw-skew-y:0;--tw-scale-x:1;--tw-scale-y:1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness:proximity;--tw-gradient-from-position: ;--tw-gradient-via-position: ;--tw-gradient-to-position: ;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width:0px;--tw-ring-offset-color:#fff;--tw-ring-color:rgb(59 130 246 / 0.5);--tw-ring-offset-shadow:0 0 #0000;--tw-ring-shadow:0 0 #0000;--tw-shadow:0 0 #0000;--tw-shadow-colored:0 0 #0000;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: ;--tw-contain-size: ;--tw-contain-layout: ;--tw-contain-paint: ;--tw-contain-style: }/* ! tailwindcss v3.4.16 | MIT License | https://tailwindcss.com */*,::after,::before{box-sizing:border-box;border-width:0;border-style:solid;border-color:#e5e7eb}::after,::before{--tw-content:''}:host,html{line-height:1.5;-webkit-text-size-adjust:100%;-moz-tab-size:4;tab-size:4;font-family:ui-sans-serif, system-ui, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji";font-feature-settings:normal;font-variation-settings:normal;-webkit-tap-highlight-color:transparent}body{margin:0;line-height:inherit}hr{height:0;color:inherit;border-top-width:1px}abbr:where([title]){-webkit-text-decoration:underline dotted;text-decoration:underline dotted}h1,h2,h3,h4,h5,h6{font-size:inherit;font-weight:inherit}a{color:inherit;text-decoration:inherit}b,strong{font-weight:bolder}code,kbd,pre,samp{font-family:ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;font-feature-settings:normal;font-variation-settings:normal;font-size:1em}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}table{text-indent:0;border-color:inherit;border-collapse:collapse}button,input,optgroup,select,textarea{font-family:inherit;font-feature-settings:inherit;font-variation-settings:inherit;font-size:100%;font-weight:inherit;line-height:inherit;letter-spacing:inherit;color:inherit;margin:0;padding:0}button,select{text-transform:none}button,input:where([type=button]),input:where([type=reset]),input:where([type=submit]){-webkit-appearance:button;background-color:transparent;background-image:none}:-moz-focusring{outline:auto}:-moz-ui-invalid{box-shadow:none}progress{vertical-align:baseline}::-webkit-inner-spin-button,::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}summary{display:list-item}blockquote,dd,dl,figure,h1,h2,h3,h4,h5,h6,hr,p,pre{margin:0}fieldset{margin:0;padding:0}legend{padding:0}menu,ol,ul{list-style:none;margin:0;padding:0}dialog{padding:0}textarea{resize:vertical}input::placeholder,textarea::placeholder{opacity:1;color:#9ca3af}[role=button],button{cursor:pointer}:disabled{cursor:default}audio,canvas,embed,iframe,img,object,svg,video{display:block;vertical-align:middle}img,video{max-width:100%;height:auto}[hidden]:where(:not([hidden=until-found])){display:none}.mb-1{margin-bottom:0.25rem}.mb-2{margin-bottom:0.5rem}.mb-3{margin-bottom:0.75rem}.hidden{display:none}.w-full{width:100%}.overflow-y-auto{overflow-y:auto}.rounded{border-radius:0.25rem}.border-2{border-width:2px}.border-gray-800{--tw-border-opacity:1;border-color:rgb(31 41 55 / var(--tw-border-opacity, 1))}.p-2{padding:0.5rem}.text-center{text-align:center}.text-xs{font-size:0.75rem;line-height:1rem}</style></head>
<body>
    <div id="device" class="device" style="background-color: rgb(76, 175, 80);">
        <div id="screen" class="screen screen-off">
            <div id="screenContent" class="screen-content" style="visibility: hidden;">
                <div class="status-bar">
                    <div class="water-container">
                        <div class="water-label">WATER:</div>
                        <div class="water-bar">
                            <div id="waterLevel" class="water-level" style="width: 25%;"></div>
                        </div>
                        <div id="waterPercentage" class="water-percentage">25%</div>
                    </div>
                    <div id="growthStage" class="growth-stage">Stage 1</div>
                </div>
                <div id="plantName" class="plant-name">Sunny</div>
                <div class="plant-container">
                    <div id="plantImage" class="plant-image">
                    <div class="plant-static" style="width: 100%; height: 100%; display: flex; justify-content: center; align-items: center;">
                        <svg width="120" height="120" viewBox="0 0 120 120">
                            <circle cx="60" cy="60" r="50" fill="#4CAF50"></circle>
                            <text x="60" y="65" text-anchor="middle" fill="white" font-size="14">Stage 1</text>
                        </svg>
                    </div>
                </div>
                    <div id="plantMessage" class="plant-message">What a beautiful day!</div>
                </div>
            </div>
            
            <!-- Startup Screen (inside the screen) -->
            <div id="startupScreen" class="startup-screen" style="display: none;">
                <div>GROWI v1.0</div>
                <div>BOOTING UP...</div>
                <div class="loading-bar-container">
                    <div id="startupLoadingBar" class="loading-bar" style="width: 100%;"></div>
                </div>
            </div>
            
            <!-- Shutdown Screen (inside the screen) -->
            <div id="shutdownScreen" class="shutdown-screen" style="display: none;">
                <div>SHUTTING DOWN...</div>
            </div>
        </div>
        
        <div class="buttons-container">
            <div class="main-buttons">
                <div id="btnWater" class="btn btn-water">WATER</div>
                <div id="btnFertilize" class="btn btn-fertilize">FERTILIZE</div>
            </div>
            <div class="secondary-buttons">
                <div id="btnRename" class="btn btn-secondary">RENAME</div>
                <div id="btnChangePlant" class="btn btn-secondary">CHANGE PLANT</div>
                <div id="btnStats" class="btn btn-secondary">STATS</div>
                <div id="btnSettings" class="btn btn-secondary">SETTINGS</div>
            </div>
        </div>
        
        <div class="power-button-container">
            <div id="powerButton" class="power-button">
                <div class="power-icon"></div>
            </div>
        </div>
        
        <!-- Heart pattern container -->
        <div id="heartPattern" class="heart-pattern" style="display: block;"><div class="heart" style="left: 37.5339px; top: 34.2738px;"></div><div class="heart" style="left: 92.6694px; top: 31.7532px;"></div><div class="heart" style="left: 152.683px; top: 38.4131px;"></div><div class="heart" style="left: 213.117px; top: 33.2434px;"></div><div class="heart" style="left: 277.57px; top: 30.8123px;"></div><div class="heart" style="left: 333.936px; top: 34.0231px;"></div><div class="heart" style="left: 390.52px; top: 35.7378px;"></div><div class="heart" style="left: 34.9152px; top: 96.0413px;"></div><div class="heart" style="left: 99.8784px; top: 92.2584px;"></div><div class="heart" style="left: 154.193px; top: 96.9528px;"></div><div class="heart" style="left: 213.619px; top: 99.9254px;"></div><div class="heart" style="left: 278.758px; top: 91.0686px;"></div><div class="heart" style="left: 339.097px; top: 95.8655px;"></div><div class="heart" style="left: 395.291px; top: 98.9727px;"></div><div class="heart" style="left: 32.0689px; top: 156.947px;"></div><div class="heart" style="left: 99.116px; top: 157.903px;"></div><div class="heart" style="left: 156.06px; top: 150.156px;"></div><div class="heart" style="left: 217.351px; top: 157.983px;"></div><div class="heart" style="left: 270.275px; top: 150.549px;"></div><div class="heart" style="left: 331.641px; top: 156.032px;"></div><div class="heart" style="left: 393.506px; top: 151.015px;"></div><div class="heart" style="left: 32.908px; top: 211.383px;"></div><div class="heart" style="left: 91.0772px; top: 217.668px;"></div><div class="heart" style="left: 152.24px; top: 219.189px;"></div><div class="heart" style="left: 213.797px; top: 216.259px;"></div><div class="heart" style="left: 271.731px; top: 211.661px;"></div><div class="heart" style="left: 334.737px; top: 212.323px;"></div><div class="heart" style="left: 398.125px; top: 211.407px;"></div><div class="heart" style="left: 33.7025px; top: 276.08px;"></div><div class="heart" style="left: 99.6723px; top: 277.247px;"></div><div class="heart" style="left: 157.232px; top: 271.156px;"></div><div class="heart" style="left: 213.219px; top: 277.757px;"></div><div class="heart" style="left: 274.756px; top: 273.533px;"></div><div class="heart" style="left: 338.298px; top: 277.46px;"></div><div class="heart" style="left: 395.876px; top: 276.83px;"></div><div class="heart" style="left: 35.3229px; top: 334.721px;"></div><div class="heart" style="left: 91.9821px; top: 339.489px;"></div><div class="heart" style="left: 153.089px; top: 333.739px;"></div><div class="heart" style="left: 213.58px; top: 330.344px;"></div><div class="heart" style="left: 273.608px; top: 339.527px;"></div><div class="heart" style="left: 332.801px; top: 334.428px;"></div><div class="heart" style="left: 395.115px; top: 332.212px;"></div><div class="heart" style="left: 31.795px; top: 397.409px;"></div><div class="heart" style="left: 93.5246px; top: 399.714px;"></div><div class="heart" style="left: 151.511px; top: 397.379px;"></div><div class="heart" style="left: 218.582px; top: 396.318px;"></div><div class="heart" style="left: 274.747px; top: 395.081px;"></div><div class="heart" style="left: 339.206px; top: 396.467px;"></div><div class="heart" style="left: 397.356px; top: 390.223px;"></div><div class="heart" style="left: 31.9961px; top: 459.423px;"></div><div class="heart" style="left: 92.7144px; top: 457.195px;"></div><div class="heart" style="left: 156.453px; top: 454.549px;"></div><div class="heart" style="left: 213.33px; top: 454.102px;"></div><div class="heart" style="left: 270.806px; top: 458.181px;"></div><div class="heart" style="left: 338.816px; top: 456.81px;"></div><div class="heart" style="left: 395.755px; top: 450.746px;"></div><div class="heart" style="left: 30.8186px; top: 517.102px;"></div><div class="heart" style="left: 93.3427px; top: 515.414px;"></div><div class="heart" style="left: 157.765px; top: 510.757px;"></div><div class="heart" style="left: 214.031px; top: 519.048px;"></div><div class="heart" style="left: 279.589px; top: 519.891px;"></div><div class="heart" style="left: 331.713px; top: 512.231px;"></div><div class="heart" style="left: 398.148px; top: 515.722px;"></div><div class="heart" style="left: 35.2705px; top: 571.441px;"></div><div class="heart" style="left: 92.9914px; top: 572.627px;"></div><div class="heart" style="left: 158.188px; top: 570.92px;"></div><div class="heart" style="left: 216.895px; top: 570.298px;"></div><div class="heart" style="left: 273.566px; top: 575.431px;"></div><div class="heart" style="left: 331.838px; top: 573.355px;"></div><div class="heart" style="left: 392.221px; top: 573.042px;"></div><div class="heart" style="left: 30.6965px; top: 634.968px;"></div><div class="heart" style="left: 93.2551px; top: 635.81px;"></div><div class="heart" style="left: 151.414px; top: 634.572px;"></div><div class="heart" style="left: 212.842px; top: 639.409px;"></div><div class="heart" style="left: 277.922px; top: 634.902px;"></div><div class="heart" style="left: 333.743px; top: 635.996px;"></div><div class="heart" style="left: 393.304px; top: 634.127px;"></div><div class="heart" style="left: 36.8316px; top: 692.833px;"></div><div class="heart" style="left: 96.5852px; top: 696.894px;"></div><div class="heart" style="left: 156.912px; top: 691.029px;"></div><div class="heart" style="left: 215.672px; top: 692.181px;"></div><div class="heart" style="left: 274.614px; top: 695.694px;"></div><div class="heart" style="left: 337.544px; top: 695.042px;"></div><div class="heart" style="left: 398.609px; top: 696.368px;"></div></div>
        
        <!-- Rename Modal -->
        <div id="renameModal" class="modal" style="display: none;">
            <div class="modal-content">
                <div class="modal-title">RENAME YOUR PLANT</div>
                <input type="text" id="newPlantName" maxlength="12" class="w-full p-2 border-2 border-gray-800 rounded text-xs mb-2">
                <div class="modal-buttons">
                    <div id="saveRenameBtn" class="modal-btn">SAVE</div>
                    <div id="cancelRenameBtn" class="modal-btn">CANCEL</div>
                </div>
            </div>
        </div>
        
        <!-- Change Plant Modal -->
        <div id="changePlantModal" class="modal" style="display: none;">
            <div class="modal-content">
                <div class="modal-title">CHOOSE A PLANT</div>
                <div id="plantOptions">
                    <div class="plant-option selected" data-plant="Sunflower">Sunflower</div>
                    <div class="plant-option" data-plant="Rose">Rose</div>
                    <div class="plant-option" data-plant="Fern">Fern</div>
                    <div class="plant-option" data-plant="Cactus">Cactus</div>
                </div>
                <div class="modal-buttons">
                    <div id="savePlantBtn" class="modal-btn">SAVE</div>
                    <div id="cancelPlantBtn" class="modal-btn">CANCEL</div>
                </div>
            </div>
        </div>
        
        <!-- Change Plant Confirmation Modal -->
        <div id="changePlantConfirmModal" class="modal" style="display: none;">
            <div class="modal-content">
                <div class="modal-title">ARE YOU SURE?</div>
                <p class="text-center mb-3">Changing your plant will reset your growth progress!</p>
                <div class="modal-buttons">
                    <div id="confirmChangePlantBtn" class="modal-btn" style="background-color: #f44336;">CHANGE</div>
                    <div id="cancelChangePlantBtn" class="modal-btn">CANCEL</div>
                </div>
            </div>
        </div>
        
        <!-- Stats Modal -->
        <div id="statsModal" class="modal" style="display: none;">
            <div class="modal-content">
                <div class="modal-title">PLANT STATS</div>
                <div id="statsContent">
                    <div class="stats-item">
                        <span>Name:</span>
                        <span id="statName">Sunny</span>
                    </div>
                    <div class="stats-item">
                        <span>Water:</span>
                        <span id="statWater">25%</span>
                    </div>
                    <div class="stats-item">
                        <span>Age:</span>
                        <span id="statAge">0 days</span>
                    </div>
                    <div class="stats-item">
                        <span>Species:</span>
                        <span id="statSpecies">Sunflower</span>
                    </div>
                    <div class="stats-item">
                        <span>Growth Stage:</span>
                        <span id="statGrowth">1</span>
                    </div>
                    <div class="stats-item">
                        <span>Times Watered:</span>
                        <span id="statWatered">0</span>
                    </div>
                    <div class="stats-item">
                        <span>Personality:</span>
                        <span id="statPersonality">Cheerful</span>
                    </div>
                </div>
                <div class="modal-buttons">
                    <div id="closeStatsBtn" class="modal-btn">CLOSE</div>
                </div>
            </div>
        </div>
        
        <!-- Settings Modal -->
        <div id="settingsModal" class="modal" style="display: none;">
            <div class="modal-content">
                <div class="modal-title">SETTINGS</div>
                
                <div class="mb-2">
                    <div class="mb-1">Case Color:</div>
                    <input type="range" id="colorPicker" class="color-wheel" min="0" max="360" value="120">
                </div>
                
                <div class="mb-2">
                    <div class="mb-1">Pattern:</div>
                    <div class="pattern-options">
                        <div class="pattern-option" data-pattern="plain">Plain</div>
                        <div class="pattern-option selected" data-pattern="hearts">Hearts</div>
                        <div class="pattern-option" data-pattern="striped">Striped</div>
                        <div class="pattern-option" data-pattern="polka">Polka Dots</div>
                    </div>
                </div>
                
                <div class="mb-2">
                    <div class="mb-1">Personality:</div>
                    <div class="personality-options">
                        <div class="personality-option selected" data-personality="cheerful">Cheerful</div>
                        <div class="personality-option" data-personality="funny">Funny</div>
                        <div class="personality-option" data-personality="chill">Chill</div>
                        <div class="personality-option" data-personality="moody">Moody</div>
                    </div>
                </div>
                
                <div class="mb-2">
                    <div id="helpBtn" class="modal-btn w-full mb-2">HELP</div>
                    <div id="resetBtn" class="modal-btn w-full" style="background-color: #f44336;">RESET PLANT</div>
                </div>
                
                <div class="modal-buttons">
                    <div id="saveSettingsBtn" class="modal-btn">SAVE</div>
                    <div id="cancelSettingsBtn" class="modal-btn">CANCEL</div>
                </div>
            </div>
        </div>
        
        <!-- Help Modal -->
        <div id="helpModal" class="modal" style="display: none;">
            <div class="modal-content">
                <div class="modal-title">HELP</div>
                <div class="overflow-y-auto text-xs">
                    <p class="mb-2"><b>WATER:</b> Water your plant to increase water level. Plants need water to survive!</p>
                    <p class="mb-2"><b>FERTILIZE:</b> Give your plant nutrients once every 24 hours to help it grow to the next stage.</p>
                    <p class="mb-2"><b>RENAME:</b> Give your plant a new name.</p>
                    <p class="mb-2"><b>CHANGE PLANT:</b> Choose a different plant species. This will reset your growth progress.</p>
                    <p class="mb-2"><b>STATS:</b> View detailed information about your plant.</p>
                    <p class="mb-2"><b>SETTINGS:</b> Customize your GROWI device and plant personality.</p>
                    <p class="mb-2"><b>POWER:</b> Turn your GROWI device on or off.</p>
                </div>
                <div class="modal-buttons">
                    <div id="closeHelpBtn" class="modal-btn">CLOSE</div>
                </div>
            </div>
        </div>
        
        <!-- Reset Confirmation Modal -->
        <div id="resetConfirmModal" class="modal" style="display: none;">
            <div class="modal-content">
                <div class="modal-title">ARE YOU SURE?</div>
                <p class="text-center mb-3">This will reset your plant and all progress will be lost!</p>
                <div class="modal-buttons">
                    <div id="confirmResetBtn" class="modal-btn" style="background-color: #f44336;">RESET</div>
                    <div id="cancelResetBtn" class="modal-btn">CANCEL</div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Audio elements (placeholders)
        const buttonSound = new Audio('Sounds/button.mp3');
        const powerUpSound = new Audio('Sounds/powerup.mp3');
        const powerDownSound = new Audio('Sounds/powerdown.mp3');
        const waterSound = new Audio('Sounds/water.mp3');
        const fertilizeSound = new Audio('Sounds/fertilize.mp3');
        
        // DOM elements
        const device = document.getElementById('device');
        const screen = document.getElementById('screen');
        const screenContent = document.getElementById('screenContent');
        const waterLevel = document.getElementById('waterLevel');
        const waterPercentage = document.getElementById('waterPercentage');
        const growthStage = document.getElementById('growthStage');
        const plantName = document.getElementById('plantName');
        const plantImage = document.getElementById('plantImage');
        const plantMessage = document.getElementById('plantMessage');
        const btnWater = document.getElementById('btnWater');
        const btnFertilize = document.getElementById('btnFertilize');
        const btnRename = document.getElementById('btnRename');
        const btnChangePlant = document.getElementById('btnChangePlant');
        const btnStats = document.getElementById('btnStats');
        const btnSettings = document.getElementById('btnSettings');
        const powerButton = document.getElementById('powerButton');
        const startupScreen = document.getElementById('startupScreen');
        const shutdownScreen = document.getElementById('shutdownScreen');
        const startupLoadingBar = document.getElementById('startupLoadingBar');
        const heartPattern = document.getElementById('heartPattern');
        
        // Modals
        const renameModal = document.getElementById('renameModal');
        const changePlantModal = document.getElementById('changePlantModal');
        const changePlantConfirmModal = document.getElementById('changePlantConfirmModal');
        const statsModal = document.getElementById('statsModal');
        const settingsModal = document.getElementById('settingsModal');
        const helpModal = document.getElementById('helpModal');
        const resetConfirmModal = document.getElementById('resetConfirmModal');
        
        // Plant data and state
        let isPoweredOn = false;
        let waterTimer;
        let fertilizeTimer;
        let growthAnimationTimer;
        let isGrowthAnimating = false;
        let lastAction = null; // Track the last action performed
        let wasOverwatered = false; // Track if the plant was overwatered
        let selectedNewPlant = null; // Track the newly selected plant
        let plantData = {
            name: 'Sunny',
            species: 'Sunflower',
            waterLevel: 25,
            growthStage: 1,
            age: 0,
            timesWatered: 0,
            personality: 'cheerful',
            lastFertilized: null,
            fertilizeCountdown: 0,
            createdAt: new Date().toISOString()
        };
        
        // Device customization - set default to green (120 hue) and plain pattern
        let deviceCustomization = {
            color: 120,
            pattern: 'plain'
        };
        
        // Create heart pattern
        function createHeartPattern() {
            heartPattern.innerHTML = '';
            const deviceWidth = device.offsetWidth;
            const deviceHeight = device.offsetHeight;
            
            // Create a grid of hearts
            const spacing = 60;
            
            for (let y = 30; y < deviceHeight - 30; y += spacing) {
                for (let x = 30; x < deviceWidth - 30; x += spacing) {
                    const heart = document.createElement('div');
                    heart.className = 'heart';
                    heart.style.left = `${x + (Math.random() * 10)}px`;
                    heart.style.top = `${y + (Math.random() * 10)}px`;
                    heartPattern.appendChild(heart);
                }
            }
        }
        
        // Personality messages
        const personalityMessages = {
            cheerful: {
                greeting: ["Hello friend!", "What a beautiful day!", "I'm so happy to see you!"],
                watered: ["Ahh, refreshing!", "Thank you for the water!", "Yay! Water!"],
                overwatered: ["Whoa! Too much water!", "I'm drowning! But still happy!", "Splash! That's a lot!"],
                fertilized: ["Nutrients! Delicious!", "I feel stronger already!", "Growing power activated!"],
                thirsty: ["Could use some water!", "A little thirsty today!", "Water would be nice!"],
                growing: ["I'm growing!", "Look at me grow!", "Getting bigger!"],
                renamed: ["I love my new name!", "New name, same plant!", "You can call me {name}!"],
                changed: ["New look, same me!", "I feel different!", "Change is good!"]
            },
            funny: {
                greeting: ["Leaf me alone... just kidding!", "I'm rooting for you!", "What's up? I am, literally!"],
                watered: ["Ahh, H2-Oh yes!", "Water you waiting for? I'm growing!", "Splish splash I was taking a bath!"],
                overwatered: ["Help! I can't swim!", "I'm not a water lily, you know!", "Glub glub... too much!"],
                fertilized: ["That's some good poop!", "Mmm, tasty dirt nutrients!", "Is this organic? Just asking!"],
                thirsty: ["My soil is drier than your jokes!", "Water you doing? I'm thirsty!", "SOS: Save Our Soil!"],
                growing: ["I'm having a growth spurt!", "Getting taller! Soon I'll need my own apartment!", "Growing like a weed... wait, I'm not a weed!"],
                renamed: ["You can call me {name}... or whatever!", "New name? I barely remembered the old one!", "Identity crisis averted!"],
                changed: ["New species, who dis?", "I've had a makeover!", "Do these leaves make me look fat?"]
            },
            chill: {
                greeting: ["Hey there.", "Sup?", "Just chillin'."],
                watered: ["Thanks, man.", "Cool water, dude.", "Hydration station."],
                overwatered: ["Whoa, easy there.", "That's plenty, thanks.", "I'm good, really."],
                fertilized: ["Nice nutrients.", "Feeling stronger.", "Good stuff."],
                thirsty: ["Could use some water.", "Bit dry here.", "Water would be cool."],
                growing: ["Growing steadily.", "Making progress.", "One day at a time."],
                renamed: ["New name. Cool.", "{name}. I like it.", "I can work with {name}."],
                changed: ["New look. Nice.", "Change is chill.", "Different vibe now."]
            },
            moody: {
                greeting: ["Oh, it's you.", "What do you want?", "I guess we're doing this again."],
                watered: ["Finally, some water.", "Took you long enough.", "I suppose I should say thanks."],
                overwatered: ["Are you TRYING to drown me?", "Too much! Can't you tell?", "Great, now I'm soaked."],
                fertilized: ["Hmph, acceptable nutrients.", "Could be better quality.", "I guess this will do."],
                thirsty: ["I'm DYING of thirst here!", "Hello? Water? Remember me?", "So you're just going to let me dry out?"],
                growing: ["Growing despite your care.", "Somehow I'm still alive.", "One more stage of this torture."],
                renamed: ["Fine, call me {name} then.", "Whatever, {name} it is.", "I preferred my old name."],
                changed: ["Oh great, a new identity crisis.", "I was just getting used to my old self.", "This better be an improvement."]
            }
        };
        
        // Initialize
        function init() {
            loadData();
            updateDisplay();
            setupEventListeners();
            startWaterTimer();
            updateFertilizeButton();
            createHeartPattern();
            updateDeviceAppearance(); // Make sure device starts with correct appearance
        }
        
        // Load data from localStorage
        function loadData() {
            const savedPlantData = localStorage.getItem('growiPlantData');
            const savedDeviceCustomization = localStorage.getItem('growiDeviceCustomization');
            
            if (savedPlantData) {
                plantData = JSON.parse(savedPlantData);
                
                // Calculate water loss since last visit
                const lastSaved = new Date(plantData.lastSaved || plantData.createdAt);
                const now = new Date();
                const minutesPassed = Math.floor((now - lastSaved) / (1000 * 60));
                const waterLoss = Math.floor(minutesPassed / 30); // 1% every 30 minutes
                
                if (waterLoss > 0) {
                    plantData.waterLevel = Math.max(0, plantData.waterLevel - waterLoss);
                }
                
                // Update fertilize countdown
                if (plantData.lastFertilized) {
                    const lastFertilized = new Date(plantData.lastFertilized);
                    const hoursPassed = (now - lastFertilized) / (1000 * 60 * 60);
                    if (hoursPassed < 24) {
                        plantData.fertilizeCountdown = Math.ceil(24 - hoursPassed);
                    } else {
                        plantData.fertilizeCountdown = 0;
                    }
                }
                
                // Update age in days
                const createdAt = new Date(plantData.createdAt);
                plantData.age = Math.floor((now - createdAt) / (1000 * 60 * 60 * 24));
            }
            
            if (savedDeviceCustomization) {
                deviceCustomization = JSON.parse(savedDeviceCustomization);
            } else {
                // If no saved customization, use green and plain as default
                deviceCustomization = {
                    color: 120,
                    pattern: 'plain'
                };
            }
            updateDeviceAppearance();
        }
        
        // Save data to localStorage
        function saveData() {
            plantData.lastSaved = new Date().toISOString();
            localStorage.setItem('growiPlantData', JSON.stringify(plantData));
            localStorage.setItem('growiDeviceCustomization', JSON.stringify(deviceCustomization));
        }
        
        // Update display based on current data
        function updateDisplay() {
            // Update water level
            waterLevel.style.width = `${plantData.waterLevel}%`;
            waterPercentage.textContent = `${plantData.waterLevel}%`;
            
            // Update growth stage
            growthStage.textContent = `Stage ${plantData.growthStage}`;
            
            // Update plant name
            plantName.textContent = plantData.name;
            
            // Update plant image (static frame)
            updatePlantImage(false);
            
            // Update plant message based on last action
            updatePlantMessage();
            
            // Update stats
            document.getElementById('statName').textContent = plantData.name;
            document.getElementById('statWater').textContent = `${plantData.waterLevel}%`;
            document.getElementById('statAge').textContent = `${plantData.age} days`;
            document.getElementById('statSpecies').textContent = plantData.species;
            document.getElementById('statGrowth').textContent = plantData.growthStage;
            document.getElementById('statWatered').textContent = plantData.timesWatered;
            document.getElementById('statPersonality').textContent = plantData.personality.charAt(0).toUpperCase() + plantData.personality.slice(1);
            
            saveData();
        }
        
        // Update plant image based on species and growth stage
        function updatePlantImage(animate = false) {
            // Use the specific GIF files directly
            let plantGifPath;
            
            if (plantData.species === 'Sunflower') {
                plantGifPath = 'Plant/Sunflower.gif';
            } else if (plantData.species === 'Rose') {
                plantGifPath = 'Plant/Rose.gif';
            } else if (plantData.species === 'Fern') {
                plantGifPath = 'Plant/Fern.gif';
            } else if (plantData.species === 'Cactus') {
                plantGifPath = 'Plant/Cactus.gif';
            }
            
            if (animate) {
                // Show animation when growing
                plantImage.innerHTML = `
                    <img src="${plantGifPath}" alt="${plantData.species}" class="plant-animation" style="max-width: 100%; max-height: 100%;">
                    <div class="plant-static" style="width: 100%; height: 100%; display: flex; justify-content: center; align-items: center;">
                        <svg width="120" height="120" viewBox="0 0 120 120">
                            <circle cx="60" cy="60" r="50" fill="#4CAF50" />
                            <text x="60" y="65" text-anchor="middle" fill="white" font-size="14">Stage ${plantData.growthStage}</text>
                        </svg>
                    </div>
                `;
                
                // Start growth animation
                isGrowthAnimating = true;
                const animationElement = plantImage.querySelector('.plant-animation');
                const staticElement = plantImage.querySelector('.plant-static');
                
                animationElement.style.display = 'block';
                staticElement.style.display = 'none';
                
                // After animation completes, show static image
                clearTimeout(growthAnimationTimer);
                growthAnimationTimer = setTimeout(() => {
                    animationElement.style.display = 'none';
                    staticElement.style.display = 'block';
                    isGrowthAnimating = false;
                }, 3000); // Animation duration
            } else {
                // Show static image for current growth stage
                plantImage.innerHTML = `
                    <div class="plant-static" style="width: 100%; height: 100%; display: flex; justify-content: center; align-items: center;">
                        <svg width="120" height="120" viewBox="0 0 120 120">
                            <circle cx="60" cy="60" r="50" fill="#4CAF50" />
                            <text x="60" y="65" text-anchor="middle" fill="white" font-size="14">Stage ${plantData.growthStage}</text>
                        </svg>
                    </div>
                `;
            }
        }
        
        // Update plant message based on personality and state
        function updatePlantMessage() {
            const messages = personalityMessages[plantData.personality];
            let messageType;
            
            // Choose message type based on last action or state
            if (lastAction === 'water') {
                messageType = wasOverwatered ? 'overwatered' : 'watered';
                wasOverwatered = false; // Reset the overwatered flag
            } else if (lastAction === 'fertilize') {
                messageType = 'fertilized';
            } else if (lastAction === 'rename') {
                messageType = 'renamed';
            } else if (lastAction === 'change') {
                messageType = 'changed';
            } else if (plantData.waterLevel < 10) {
                messageType = 'thirsty';
            } else {
                // Default to greeting
                messageType = 'greeting';
            }
            
            const messageArray = messages[messageType];
            const randomIndex = Math.floor(Math.random() * messageArray.length);
            let message = messageArray[randomIndex];
            
            // Replace {name} placeholder with actual plant name
            message = message.replace('{name}', plantData.name);
            
            plantMessage.textContent = message;
            
            // Reset lastAction after displaying the message
            if (lastAction !== null && lastAction !== 'fertilize') {
                setTimeout(() => {
                    lastAction = null;
                }, 5000);
            }
        }
        
        // Start water timer (decreases water level over time)
        function startWaterTimer() {
            clearInterval(waterTimer);
            waterTimer = setInterval(() => {
                if (isPoweredOn && plantData.waterLevel > 0) {
                    plantData.waterLevel = Math.max(0, plantData.waterLevel - 1);
                    updateDisplay();
                }
            }, 30 * 60 * 1000); // 30 minutes in milliseconds (1% every 30 minutes)
        }
        
        // Update fertilize button state
        function updateFertilizeButton() {
            clearInterval(fertilizeTimer);
            
            if (plantData.fertilizeCountdown > 0) {
                btnFertilize.classList.add('disabled');
                const hours = Math.floor(plantData.fertilizeCountdown);
                const minutes = Math.floor((plantData.fertilizeCountdown - hours) * 60);
                btnFertilize.textContent = `${hours}h ${minutes}m`;
                
                fertilizeTimer = setInterval(() => {
                    if (isPoweredOn) {
                        plantData.fertilizeCountdown -= 1/60; // Decrease by 1 minute
                        if (plantData.fertilizeCountdown <= 0) {
                            plantData.fertilizeCountdown = 0;
                            btnFertilize.classList.remove('disabled');
                            btnFertilize.textContent = 'FERTILIZE';
                            clearInterval(fertilizeTimer);
                        } else {
                            const hours = Math.floor(plantData.fertilizeCountdown);
                            const minutes = Math.floor((plantData.fertilizeCountdown - hours) * 60);
                            btnFertilize.textContent = `${hours}h ${minutes}m`;
                        }
                        saveData();
                    }
                }, 60 * 1000); // Update every minute for the 24-hour countdown
            } else {
                btnFertilize.classList.remove('disabled');
                btnFertilize.textContent = 'FERTILIZE';
            }
        }
        
        // Update device appearance based on customization
        function updateDeviceAppearance() {
            // Update color (using HSL for pastel colors)
            const hue = deviceCustomization.color;
            
            // For green color (around 120 hue), use a more solid green
            if (hue >= 100 && hue <= 140) {
                device.style.backgroundColor = '#4CAF50'; // Solid green color
            } else {
                device.style.backgroundColor = `hsl(${hue}, 100%, 85%)`;
            }
            
            // Remove all pattern classes first
            device.classList.remove('pattern-striped', 'pattern-polka', 'pattern-hearts');
            
            // Update pattern
            if (deviceCustomization.pattern === 'hearts') {
                heartPattern.style.display = 'block';
            } else if (deviceCustomization.pattern === 'striped') {
                heartPattern.style.display = 'none';
                device.classList.add('pattern-striped');
            } else if (deviceCustomization.pattern === 'polka') {
                heartPattern.style.display = 'none';
                device.classList.add('pattern-polka');
            } else {
                // Plain
                heartPattern.style.display = 'none';
            }
        }
        
        // Power on the device
        function powerOn() {
            if (!isPoweredOn) {
                try {
                    powerUpSound.play().catch(() => {});
                } catch (e) {}
                
                isPoweredOn = true;
                screen.classList.remove('screen-off');
                startupScreen.classList.remove('hidden');
                startupScreen.style.display = 'flex';
                screenContent.style.visibility = 'hidden';
                
                // Animate loading bar
                let progress = 0;
                const loadingInterval = setInterval(() => {
                    progress += 5;
                    startupLoadingBar.style.width = `${progress}%`;
                    
                    if (progress >= 100) {
                        clearInterval(loadingInterval);
                        setTimeout(() => {
                            startupScreen.style.display = 'none';
                            screenContent.style.visibility = 'visible';
                        }, 500);
                    }
                }, 100);
                
                startWaterTimer();
                updateFertilizeButton();
            }
        }
        
        // Power off the device
        function powerOff() {
            if (isPoweredOn) {
                try {
                    powerDownSound.play().catch(() => {});
                } catch (e) {}
                
                isPoweredOn = false;
                shutdownScreen.classList.remove('hidden');
                shutdownScreen.style.display = 'flex';
                screenContent.style.visibility = 'hidden';
                
                // Simple shutdown without animation
                setTimeout(() => {
                    shutdownScreen.style.display = 'none';
                    screen.classList.add('screen-off');
                }, 1500);
                
                clearInterval(waterTimer);
                clearInterval(fertilizeTimer);
                clearInterval(growthAnimationTimer);
                
                // Close any open modals
                closeAllModals();
            }
        }
        
        // Toggle power
        function togglePower() {
            if (isPoweredOn) {
                powerOff();
            } else {
                powerOn();
            }
        }
        
        // Water the plant
        function waterPlant() {
            if (!isPoweredOn) return;
            
            try {
                waterSound.play().catch(() => {});
            } catch (e) {}
            
            // Check if already at 100% water before adding more
            if (plantData.waterLevel === 100) {
                wasOverwatered = true;
            } else {
                wasOverwatered = false;
                plantData.waterLevel = Math.min(100, plantData.waterLevel + 25);
            }
            
            plantData.timesWatered++;
            
            // Set last action to water
            lastAction = 'water';
            
            updateDisplay();
        }
        
        // Fertilize the plant
        function fertilizePlant() {
            if (!isPoweredOn || plantData.fertilizeCountdown > 0) return;
            
            try {
                fertilizeSound.play().catch(() => {});
            } catch (e) {}
            
            // Increase growth stage if not at max
            if (plantData.growthStage < 6) {
                plantData.growthStage++;
                
                // Show growth animation
                updatePlantImage(true);
            }
            
            // Set fertilize cooldown
            plantData.lastFertilized = new Date().toISOString();
            plantData.fertilizeCountdown = 24;
            
            // Set last action to fertilize
            lastAction = 'fertilize';
            
            updateDisplay();
            updateFertilizeButton();
        }
        
        // Open rename modal
        function openRenameModal() {
            if (!isPoweredOn) return;
            try {
                buttonSound.play().catch(() => {});
            } catch (e) {}
            
            document.getElementById('newPlantName').value = plantData.name;
            renameModal.style.display = 'flex';
        }
        
        // Save new plant name
        function saveNewName() {
            const newName = document.getElementById('newPlantName').value.trim();
            if (newName) {
                plantData.name = newName.substring(0, 12); // Limit to 12 characters
                lastAction = 'rename'; // Set last action to rename
                updateDisplay();
            }
            renameModal.style.display = 'none';
        }
        
        // Open change plant modal
        function openChangePlantModal() {
            if (!isPoweredOn) return;
            try {
                buttonSound.play().catch(() => {});
            } catch (e) {}
            
            // Update selected plant
            document.querySelectorAll('.plant-option').forEach(option => {
                option.classList.toggle('selected', option.dataset.plant === plantData.species);
            });
            
            changePlantModal.style.display = 'flex';
        }
        
        // Show change plant confirmation
        function showChangePlantConfirmation() {
            const selectedPlant = document.querySelector('.plant-option.selected');
            if (selectedPlant && selectedPlant.dataset.plant !== plantData.species) {
                selectedNewPlant = selectedPlant.dataset.plant;
                changePlantModal.style.display = 'none';
                changePlantConfirmModal.style.display = 'flex';
            } else {
                // If no change or no selection, just close the modal
                changePlantModal.style.display = 'none';
            }
        }
        
        // Confirm plant change
        function confirmPlantChange() {
            if (selectedNewPlant) {
                plantData.species = selectedNewPlant;
                plantData.growthStage = 1; // Reset growth stage
                lastAction = 'change'; // Set last action to change
                updateDisplay();
                selectedNewPlant = null;
            }
            changePlantConfirmModal.style.display = 'none';
        }
        
        // Cancel plant change
        function cancelPlantChange() {
            selectedNewPlant = null;
            changePlantConfirmModal.style.display = 'none';
            changePlantModal.style.display = 'flex'; // Go back to plant selection
        }
        
        // Open stats modal
        function openStatsModal() {
            if (!isPoweredOn) return;
            try {
                buttonSound.play().catch(() => {});
            } catch (e) {}
            
            // Update stats before showing
            document.getElementById('statName').textContent = plantData.name;
            document.getElementById('statWater').textContent = `${plantData.waterLevel}%`;
            document.getElementById('statAge').textContent = `${plantData.age} days`;
            document.getElementById('statSpecies').textContent = plantData.species;
            document.getElementById('statGrowth').textContent = plantData.growthStage;
            document.getElementById('statWatered').textContent = plantData.timesWatered;
            document.getElementById('statPersonality').textContent = plantData.personality.charAt(0).toUpperCase() + plantData.personality.slice(1);
            
            statsModal.style.display = 'flex';
        }
        
        // Open settings modal
        function openSettingsModal() {
            if (!isPoweredOn) return;
            try {
                buttonSound.play().catch(() => {});
            } catch (e) {}
            
            // Update color picker
            document.getElementById('colorPicker').value = deviceCustomization.color;
            
            // Update pattern selection
            document.querySelectorAll('.pattern-option').forEach(option => {
                option.classList.toggle('selected', option.dataset.pattern === deviceCustomization.pattern);
            });
            
            // Update personality selection
            document.querySelectorAll('.personality-option').forEach(option => {
                option.classList.toggle('selected', option.dataset.personality === plantData.personality);
            });
            
            settingsModal.style.display = 'flex';
        }
        
        // Save settings
        function saveSettings() {
            // Save color
            deviceCustomization.color = parseInt(document.getElementById('colorPicker').value);
            
            // Save pattern
            const selectedPattern = document.querySelector('.pattern-option.selected');
            if (selectedPattern) {
                deviceCustomization.pattern = selectedPattern.dataset.pattern;
            }
            
            // Save personality
            const selectedPersonality = document.querySelector('.personality-option.selected');
            if (selectedPersonality) {
                plantData.personality = selectedPersonality.dataset.personality;
            }
            
            updateDeviceAppearance();
            updateDisplay();
            settingsModal.style.display = 'none';
        }
        
        // Open help modal
        function openHelpModal() {
            try {
                buttonSound.play().catch(() => {});
            } catch (e) {}
            
            helpModal.style.display = 'flex';
        }
        
        // Open reset confirmation modal
        function openResetConfirmModal() {
            try {
                buttonSound.play().catch(() => {});
            } catch (e) {}
            
            resetConfirmModal.style.display = 'flex';
        }
        
        // Reset plant
        function resetPlant() {
            plantData = {
                name: 'Sunny',
                species: 'Sunflower',
                waterLevel: 25,
                growthStage: 1,
                age: 0,
                timesWatered: 0,
                personality: 'cheerful',
                lastFertilized: null,
                fertilizeCountdown: 0,
                createdAt: new Date().toISOString()
            };
            
            lastAction = null;
            wasOverwatered = false;
            updateDisplay();
            resetConfirmModal.style.display = 'none';
            settingsModal.style.display = 'none';
        }
        
        // Close all modals
        function closeAllModals() {
            renameModal.style.display = 'none';
            changePlantModal.style.display = 'none';
            changePlantConfirmModal.style.display = 'none';
            statsModal.style.display = 'none';
            settingsModal.style.display = 'none';
            helpModal.style.display = 'none';
            resetConfirmModal.style.display = 'none';
        }
        
        // Setup event listeners
        function setupEventListeners() {
            // Power button
            powerButton.addEventListener('click', togglePower);
            
            // Main buttons
            btnWater.addEventListener('click', () => {
                if (isPoweredOn) {
                    waterPlant();
                }
            });
            
            btnFertilize.addEventListener('click', () => {
                if (isPoweredOn && !btnFertilize.classList.contains('disabled')) {
                    fertilizePlant();
                }
            });
            
            // Secondary buttons
            btnRename.addEventListener('click', openRenameModal);
            btnChangePlant.addEventListener('click', openChangePlantModal);
            btnStats.addEventListener('click', openStatsModal);
            btnSettings.addEventListener('click', openSettingsModal);
            
            // Rename modal
            document.getElementById('saveRenameBtn').addEventListener('click', saveNewName);
            document.getElementById('cancelRenameBtn').addEventListener('click', () => {
                renameModal.style.display = 'none';
            });
            
            // Change plant modal
            document.querySelectorAll('.plant-option').forEach(option => {
                option.addEventListener('click', () => {
                    document.querySelectorAll('.plant-option').forEach(opt => {
                        opt.classList.remove('selected');
                    });
                    option.classList.add('selected');
                });
            });
            
            document.getElementById('savePlantBtn').addEventListener('click', showChangePlantConfirmation);
            document.getElementById('cancelPlantBtn').addEventListener('click', () => {
                changePlantModal.style.display = 'none';
            });
            
            // Change plant confirmation modal
            document.getElementById('confirmChangePlantBtn').addEventListener('click', confirmPlantChange);
            document.getElementById('cancelChangePlantBtn').addEventListener('click', cancelPlantChange);
            
            // Stats modal
            document.getElementById('closeStatsBtn').addEventListener('click', () => {
                statsModal.style.display = 'none';
            });
            
            // Settings modal
            document.getElementById('colorPicker').addEventListener('input', (e) => {
                const hue = e.target.value;
                if (hue >= 100 && hue <= 140) {
                    device.style.backgroundColor = '#4CAF50'; // Solid green color
                } else {
                    device.style.backgroundColor = `hsl(${hue}, 100%, 85%)`;
                }
            });
            
            document.querySelectorAll('.pattern-option').forEach(option => {
                option.addEventListener('click', () => {
                    document.querySelectorAll('.pattern-option').forEach(opt => {
                        opt.classList.remove('selected');
                    });
                    option.classList.add('selected');
                });
            });
            
            document.querySelectorAll('.personality-option').forEach(option => {
                option.addEventListener('click', () => {
                    document.querySelectorAll('.personality-option').forEach(opt => {
                        opt.classList.remove('selected');
                    });
                    option.classList.add('selected');
                });
            });
            
            document.getElementById('helpBtn').addEventListener('click', openHelpModal);
            document.getElementById('resetBtn').addEventListener('click', openResetConfirmModal);
            
            document.getElementById('saveSettingsBtn').addEventListener('click', saveSettings);
            document.getElementById('cancelSettingsBtn').addEventListener('click', () => {
                settingsModal.style.display = 'none';
            });
            
            // Help modal
            document.getElementById('closeHelpBtn').addEventListener('click', () => {
                helpModal.style.display = 'none';
            });
            
            // Reset confirmation modal
            document.getElementById('confirmResetBtn').addEventListener('click', resetPlant);
            document.getElementById('cancelResetBtn').addEventListener('click', () => {
                resetConfirmModal.style.display = 'none';
            });
        }
        
        // Initialize the app
        init();
        
        // Start with device powered off
        screen.classList.add('screen-off');
    </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'9491c39ec549080c',t:'MTc0ODgxMjkyMi4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script><iframe height="1" width="1" style="position: absolute; top: 0px; left: 0px; border: none; visibility: hidden;"></iframe>

</body></html>