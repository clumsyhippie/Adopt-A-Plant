<html lang="en"><head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Plant Tamagotchi</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=VT323&display=swap');
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'VT323', monospace;
            background-color: #a8d5ba;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            color: #333;
        }
        
        .tamagotchi {
            width: 400px;
            height: 600px;
            background-color: #ff9eb1;
            border-radius: 50px;
            border: 12px solid #e57383;
            position: relative;
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.3);
            padding: 25px;
            display: flex;
            flex-direction: column;
            align-items: center;
            transition: all 0.5s ease;
        }
        
        /* Theme: Pink (Default) */
        .theme-pink {
            background-color: #ff9eb1;
            border-color: #e57383;
        }
        
        /* Theme: Blue */
        .theme-blue {
            background-color: #9ecfff;
            border-color: #7ab5e6;
        }
        
        /* Theme: Green */
        .theme-green {
            background-color: #a8e6a8;
            border-color: #7ac77a;
        }
        
        /* Theme: Purple */
        .theme-purple {
            background-color: #d9a8ff;
            border-color: #b77ae6;
        }
        
        .screen-container {
            width: 320px;
            height: 280px;
            background-color: #d0f0c0;
            border-radius: 15px;
            border: 8px solid #90c070;
            margin-top: 20px;
            overflow: hidden;
            position: relative;
        }
        
        .screen {
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            position: relative;
        }
        
        .plant-container {
            position: relative;
            height: 160px;
            width: 160px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: flex-end;
            margin-top: 20px;
        }
        
        .pot-image {
            width: 100px;
            height: 80px;
            position: relative;
            z-index: 2;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        
        .plant-image {
            width: 120px;
            height: 120px;
            position: absolute;
            bottom: 60px;
            z-index: 3;
            display: flex;
            justify-content: center;
            align-items: center;
            transition: all 0.5s ease;
        }
        
        .plant-image.growing {
            animation: grow 0.5s ease;
        }
        
        @keyframes grow {
            0% { transform: scale(1); }
            50% { transform: scale(1.2); }
            100% { transform: scale(1); }
        }
        
        .soil {
            width: 80px;
            height: 20px;
            background-color: #8b4513;
            border-radius: 50% 50% 0 0;
            position: absolute;
            bottom: 80px;
            z-index: 1;
        }
        
        .status-bar {
            width: 100%;
            display: flex;
            justify-content: space-between;
            padding: 10px;
            font-size: 20px;
            position: absolute;
            top: 0;
            background-color: rgba(255, 255, 255, 0.7);
        }
        
        .status-item {
            display: flex;
            align-items: center;
            gap: 5px;
        }
        
        .status-label {
            margin-right: 5px;
        }
        
        .status-value {
            font-weight: bold;
        }
        
        .message {
            position: absolute;
            bottom: 15px;
            width: 100%;
            text-align: center;
            font-size: 20px;
            background-color: rgba(255, 255, 255, 0.7);
            padding: 5px 0;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }
        
        .name-display {
            font-size: 24px;
            margin-bottom: 10px;
            text-align: center;
            width: 100%;
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
            position: absolute;
            top: 45px;
        }
        
        .buttons-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            width: 100%;
            margin-top: 40px;
        }
        
        .action-btn {
            color: #333;
            border: none;
            border-radius: 10px;
            padding: 15px 10px;
            font-size: 20px;
            font-family: 'VT323', monospace;
            cursor: pointer;
            transition: all 0.2s;
            text-align: center;
            width: 100%;
            height: 55px;
        }
        
        .action-btn:hover:not(:disabled) {
            transform: translateY(-2px);
        }
        
        .action-btn:active:not(:disabled) {
            transform: translateY(2px);
        }
        
        .action-btn:disabled {
            background-color: #c0c0c0;
            color: #808080;
            cursor: not-allowed;
            box-shadow: 0 4px 0 #a0a0a0;
        }
        
        #waterBtn {
            background-color: #6aadff;
            box-shadow: 0 4px 0 #4a8dd0;
        }
        
        #waterBtn:hover:not(:disabled) {
            background-color: #5a9dff;
        }
        
        #waterBtn:active:not(:disabled) {
            box-shadow: 0 2px 0 #4a8dd0;
        }
        
        #fertilizeBtn {
            background-color: #f0d078;
            box-shadow: 0 4px 0 #d0b058;
        }
        
        #fertilizeBtn:hover:not(:disabled) {
            background-color: #e0c068;
        }
        
        #fertilizeBtn:active:not(:disabled) {
            box-shadow: 0 2px 0 #d0b058;
        }
        
        .menu-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            width: 100%;
            margin-top: 20px;
        }
        
        .menu-btn {
            background-color: #e0e0e0;
            color: #333;
            border: none;
            border-radius: 10px;
            padding: 12px 10px;
            font-size: 18px;
            font-family: 'VT323', monospace;
            cursor: pointer;
            transition: all 0.2s;
            text-align: center;
            box-shadow: 0 3px 0 #b0b0b0;
        }
        
        .menu-btn:hover {
            background-color: #d0d0d0;
            transform: translateY(-2px);
        }
        
        .menu-btn:active {
            transform: translateY(2px);
            box-shadow: 0 1px 0 #b0b0b0;
        }
        
        .modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s;
        }
        
        .modal.active {
            opacity: 1;
            visibility: visible;
        }
        
        .modal-content {
            background-color: #fff;
            padding: 30px;
            border-radius: 15px;
            width: 350px;
            max-width: 90%;
        }
        
        .modal-title {
            font-size: 28px;
            margin-bottom: 20px;
            text-align: center;
        }
        
        .modal-input {
            width: 100%;
            padding: 12px;
            margin-bottom: 20px;
            font-family: 'VT323', monospace;
            font-size: 22px;
            border: 2px solid #90c070;
            border-radius: 8px;
        }
        
        .modal-buttons {
            display: flex;
            justify-content: center;
            gap: 15px;
        }
        
        .modal-btn {
            padding: 10px 25px;
            background-color: #90c070;
            border: none;
            border-radius: 8px;
            font-family: 'VT323', monospace;
            font-size: 20px;
            cursor: pointer;
            transition: all 0.2s;
            color: #333;
        }
        
        .modal-btn:hover {
            background-color: #80b060;
            transform: translateY(-2px);
        }
        
        .modal-btn:active {
            transform: translateY(2px);
        }
        
        .plant-selection {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin-bottom: 20px;
        }
        
        .plant-option {
            width: 100%;
            height: 100px;
            background-color: #f0f0f0;
            border-radius: 8px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            cursor: pointer;
            transition: all 0.2s;
            font-size: 16px;
            color: #666;
            position: relative;
            overflow: hidden;
        }
        
        .plant-option:hover {
            background-color: #e0e0e0;
            transform: translateY(-2px);
        }
        
        .plant-option.selected {
            background-color: #d0f0c0;
            border: 2px solid #90c070;
            color: #333;
        }
        
        .plant-option-name {
            margin-top: 5px;
            font-weight: bold;
        }
        
        .stats-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            margin-bottom: 20px;
        }
        
        .stats-item {
            font-size: 20px;
        }
        
        .stats-label {
            font-weight: bold;
        }
        
        .help-item {
            margin-bottom: 10px;
            font-size: 18px;
        }
        
        .water-animation {
            position: absolute;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 10;
            opacity: 0;
            background-color: rgba(79, 164, 255, 0.2);
            transition: opacity 0.3s;
        }
        
        .water-animation.active {
            opacity: 1;
        }
        
        .fertilize-animation {
            position: absolute;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 10;
            opacity: 0;
            background-color: rgba(240, 208, 120, 0.2);
            transition: opacity 0.3s;
        }
        
        .fertilize-animation.active {
            opacity: 1;
        }
        
        .settings-section {
            margin-bottom: 20px;
        }
        
        .settings-title {
            font-size: 22px;
            margin-bottom: 10px;
            font-weight: bold;
        }
        
        .theme-options, .personality-options {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            margin-bottom: 15px;
        }
        
        .theme-option, .personality-option {
            padding: 10px;
            border-radius: 8px;
            text-align: center;
            cursor: pointer;
            transition: all 0.2s;
            font-size: 18px;
        }
        
        .theme-option:hover, .personality-option:hover {
            transform: translateY(-2px);
        }
        
        .theme-option.selected, .personality-option.selected {
            border: 2px solid #90c070;
            font-weight: bold;
        }
        
        .theme-pink-option {
            background-color: #ffccd5;
            color: #e57383;
        }
        
        .theme-blue-option {
            background-color: #cce5ff;
            color: #7ab5e6;
        }
        
        .theme-green-option {
            background-color: #d5f5d5;
            color: #7ac77a;
        }
        
        .theme-purple-option {
            background-color: #e5d5ff;
            color: #b77ae6;
        }
        
        .personality-cheerful {
            background-color: #fff2cc;
            color: #e6b800;
        }
        
        .personality-chill {
            background-color: #d1e7dd;
            color: #20c997;
        }
        
        .personality-funny {
            background-color: #f8d7da;
            color: #dc3545;
        }
        
        .personality-moody {
            background-color: #212529;
            color: #adb5bd;
        }
        
        .reset-btn {
            background-color: #ff6b6b;
            color: white;
            border: none;
            border-radius: 8px;
            padding: 10px 15px;
            font-family: 'VT323', monospace;
            font-size: 18px;
            cursor: pointer;
            transition: all 0.2s;
            display: block;
            margin: 20px auto 0;
            box-shadow: 0 3px 0 #d64545;
        }
        
        .reset-btn:hover {
            background-color: #ff5252;
            transform: translateY(-2px);
        }
        
        .reset-btn:active {
            transform: translateY(2px);
            box-shadow: 0 1px 0 #d64545;
        }
        
        /* Fallback styles for missing images */
        .plant-fallback {
            width: 100px;
            height: 100px;
            background-color: rgba(0, 128, 0, 0.2);
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            text-align: center;
            font-size: 16px;
            line-height: 1.2;
        }
        
        .pot-fallback {
            width: 80px;
            height: 60px;
            background-color: #8b4513;
            border-radius: 10px 10px 50% 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            color: white;
        }
        
        .plant-option-img {
            width: 60px;
            height: 60px;
            object-fit: contain;
        }
    </style>
</head>
<body>
    <div class="tamagotchi theme-pink" id="tamagotchi">
        <div class="screen-container">
            <div class="screen">
                <div class="status-bar">
                    <div class="status-item">
                        <span class="status-label">Water:</span>
                        <span class="status-value" id="waterLevel">25%</span>
                    </div>
                    <div class="status-item">
                        <span class="status-label">Growth Stage:</span>
                        <span class="status-value" id="growthLevel">1</span>
                    </div>
                </div>
                
                <div class="name-display" id="plantName">Plant Friend</div>
                
                <div class="plant-container">
                    <div class="plant-image" id="plantImage"><div class="plant-fallback">Sunflower<br>Stage 1</div></div>
                    <div class="soil"></div>
                    <div class="pot-image"><div class="pot-fallback">Pot</div></div>
                </div>
                
                <div class="message" id="message">Water would make me happy!</div>
                
                <div class="water-animation" id="waterAnimation"></div>
                <div class="fertilize-animation" id="fertilizeAnimation"></div>
            </div>
        </div>
        
        <div class="buttons-container">
            <button class="action-btn" id="waterBtn">WATER</button>
            <button class="action-btn" id="fertilizeBtn">FERTILIZE</button>
        </div>
        
        <div class="menu-container">
            <button class="menu-btn" id="nameBtn">RENAME</button>
            <button class="menu-btn" id="changeBtn">CHANGE PLANT</button>
            <button class="menu-btn" id="statsBtn">STATS</button>
            <button class="menu-btn" id="settingsBtn">SETTINGS</button>
        </div>
    </div>
    
    <!-- Name Modal -->
    <div class="modal" id="nameModal">
        <div class="modal-content">
            <h2 class="modal-title">Name Your Plant</h2>
            <input type="text" class="modal-input" id="nameInput" placeholder="Enter a name" maxlength="12">
            <div class="modal-buttons">
                <button class="modal-btn" id="saveNameBtn">SAVE</button>
                <button class="modal-btn" id="cancelNameBtn">CANCEL</button>
            </div>
        </div>
    </div>
    
    <!-- Plant Selection Modal -->
    <div class="modal" id="plantModal">
        <div class="modal-content">
            <h2 class="modal-title">Choose Your Plant</h2>
            <div class="plant-selection">
                <div class="plant-option selected" data-plant="Sunflower">
                    <img src="Plant/Sunflower1.png" alt="Sunflower" class="plant-option-img" onerror="this.style.display='none'" style="display: none;">
                    <div class="plant-option-name">Sunflower</div>
                </div>
                <div class="plant-option" data-plant="Rose">
                    <img src="Plant/Rose1.png" alt="Rose" class="plant-option-img" onerror="this.style.display='none'" style="display: none;">
                    <div class="plant-option-name">Rose</div>
                </div>
                <div class="plant-option" data-plant="Tulip">
                    <img src="Plant/Tulip1.png" alt="Tulip" class="plant-option-img" onerror="this.style.display='none'" style="display: none;">
                    <div class="plant-option-name">Tulip</div>
                </div>
                <div class="plant-option" data-plant="Cactus">
                    <img src="Plant/Cactus1.png" alt="Cactus" class="plant-option-img" onerror="this.style.display='none'" style="display: none;">
                    <div class="plant-option-name">Cactus</div>
                </div>
            </div>
            <div class="modal-buttons">
                <button class="modal-btn" id="savePlantBtn">SAVE</button>
                <button class="modal-btn" id="cancelPlantBtn">CANCEL</button>
            </div>
        </div>
    </div>
    
    <!-- Stats Modal -->
    <div class="modal" id="statsModal">
        <div class="modal-content">
            <h2 class="modal-title">Plant Stats</h2>
            <div class="stats-grid">
                <div class="stats-item">
                    <span class="stats-label">Name:</span>
                    <span id="statsName">Plant Friend</span>
                </div>
                <div class="stats-item">
                    <span class="stats-label">Type:</span>
                    <span id="statsType">Sunflower</span>
                </div>
                <div class="stats-item">
                    <span class="stats-label">Water:</span>
                    <span id="statsWater">25%</span>
                </div>
                <div class="stats-item">
                    <span class="stats-label">Growth:</span>
                    <span id="statsGrowth">1</span>
                </div>
                <div class="stats-item">
                    <span class="stats-label">Age:</span>
                    <span id="statsAge">0 days</span>
                </div>
                <div class="stats-item">
                    <span class="stats-label">Watered:</span>
                    <span id="statsWatered">0 times</span>
                </div>
                <div class="stats-item">
                    <span class="stats-label">Fertilized:</span>
                    <span id="statsFertilized">0 times</span>
                </div>
                <div class="stats-item">
                    <span class="stats-label">Personality:</span>
                    <span id="statsPersonality">Cheerful</span>
                </div>
            </div>
            <div class="modal-buttons">
                <button class="modal-btn" id="closeStatsBtn">CLOSE</button>
            </div>
        </div>
    </div>
    
    <!-- Settings Modal -->
    <div class="modal" id="settingsModal">
        <div class="modal-content">
            <h2 class="modal-title">Settings</h2>
            
            <div class="settings-section">
                <div class="settings-title">Theme Color</div>
                <div class="theme-options">
                    <div class="theme-option theme-pink-option selected" data-theme="pink">Pink</div>
                    <div class="theme-option theme-blue-option" data-theme="blue">Blue</div>
                    <div class="theme-option theme-green-option" data-theme="green">Green</div>
                    <div class="theme-option theme-purple-option" data-theme="purple">Purple</div>
                </div>
            </div>
            
            <div class="settings-section">
                <div class="settings-title">Plant Personality</div>
                <div class="personality-options">
                    <div class="personality-option personality-cheerful selected" data-personality="cheerful">Cheerful</div>
                    <div class="personality-option personality-chill" data-personality="chill">Chill</div>
                    <div class="personality-option personality-funny" data-personality="funny">Funny</div>
                    <div class="personality-option personality-moody" data-personality="moody">Moody</div>
                </div>
            </div>
            
            <div class="settings-section">
                <div class="settings-title">Help</div>
                <div class="help-item">WATER - Water your plant when it gets thirsty</div>
                <div class="help-item">FERTILIZE - Help your plant grow faster (once every 24 hours)</div>
                <div class="help-item">RENAME - Change your plant's name</div>
                <div class="help-item">CHANGE PLANT - Select a different plant type</div>
                <div class="help-item">STATS - View detailed plant statistics</div>
                <div class="help-item">SETTINGS - Change theme and personality</div>
            </div>
            
            <button class="reset-btn" id="resetBtn">RESET PLANT</button>
            
            <div class="modal-buttons" style="margin-top: 20px;">
                <button class="modal-btn" id="saveSettingsBtn">SAVE</button>
                <button class="modal-btn" id="cancelSettingsBtn">CANCEL</button>
            </div>
        </div>
    </div>
    
    <!-- Reset Confirmation Modal -->
    <div class="modal" id="resetModal">
        <div class="modal-content">
            <h2 class="modal-title">Reset Game?</h2>
            <p style="text-align: center; margin-bottom: 20px; font-size: 20px;">Are you sure you want to reset your plant? This cannot be undone.</p>
            <div class="modal-buttons">
                <button class="modal-btn" id="confirmResetBtn">YES, RESET</button>
                <button class="modal-btn" id="cancelResetBtn">CANCEL</button>
            </div>
        </div>
    </div>
    
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            console.log("Document loaded");
            
            // Plant state
            let plant = {
                name: "Plant Friend",
                type: "Sunflower",
                typeName: "Sunflower",
                waterLevel: 25,
                growthStage: 1,
                maxGrowthStage: 6,
                createdAt: new Date(),
                lastWatered: new Date(),
                lastFertilized: null,
                timesWatered: 0,
                timesFertilized: 0,
                theme: "pink",
                personality: "cheerful"
            };
            
            // Plant types
            const plantTypes = {
                Sunflower: {
                    name: "Sunflower",
                    growthStages: 6
                },
                Rose: {
                    name: "Rose",
                    growthStages: 6
                },
                Tulip: {
                    name: "Tulip",
                    growthStages: 6
                },
                Cactus: {
                    name: "Cactus",
                    growthStages: 6
                }
            };
            
            // Personality responses
            const personalityResponses = {
                cheerful: {
                    watered: [
                        "Yay! Thank you for watering me!",
                        "Ahh, so refreshing!",
                        "Water is life! I feel amazing now!"
                    ],
                    overwatered: [
                        "Whoa! That's a bit too much water!",
                        "I'm already full of water!",
                        "I appreciate it, but I'm hydrated!"
                    ],
                    fertilized: [
                        "Wow! I can feel myself growing stronger!",
                        "This fertilizer is amazing!",
                        "I'm so excited to grow bigger!"
                    ],
                    thirsty: [
                        "I'm a bit thirsty! Water please?",
                        "Could I have some water?",
                        "Water would make me happy!"
                    ],
                    happy: [
                        "I'm so happy to be your plant friend!",
                        "What a wonderful day to grow!",
                        "I'm thriving thanks to you!"
                    ],
                    renamed: [
                        "I love my new name!",
                        "What a wonderful name!",
                        "My new name makes me happy!"
                    ],
                    transformed: [
                        "Wow! I feel like a whole new plant!",
                        "This transformation is amazing!",
                        "I love my new look!"
                    ]
                },
                chill: {
                    watered: [
                        "Thanks for the water, man.",
                        "Ahh, that's the good stuff.",
                        "Cool water. Appreciate it."
                    ],
                    overwatered: [
                        "Whoa, easy on the water there.",
                        "I'm good on water for now.",
                        "Already hydrated, but no worries."
                    ],
                    fertilized: [
                        "Nice fertilizer. Feeling stronger.",
                        "That's some good nutrients.",
                        "Growing taller now. No rush."
                    ],
                    thirsty: [
                        "Could use some water when you get a chance.",
                        "Feeling a bit dry over here.",
                        "Water would be cool whenever."
                    ],
                    happy: [
                        "Just chilling and growing.",
                        "Life is good in this pot.",
                        "Vibing with the sunlight today."
                    ],
                    renamed: [
                        "Cool name. I can work with that.",
                        "Nice choice on the name.",
                        "New name, same chill plant."
                    ],
                    transformed: [
                        "New look, still me inside though.",
                        "Transformation complete. Looking good.",
                        "Changed my style. Pretty cool."
                    ]
                },
                funny: {
                    watered: [
                        "Water you waiting for? Oh wait, you did!",
                        "I'm having a splashing good time now!",
                        "That water was so good!"
                    ],
                    overwatered: [
                        "Help! I'm drowning in affection!",
                        "Any more water and I'll need floaties!",
                        "I'm not a fish!"
                    ],
                    fertilized: [
                        "Holy soil! That's some good stuff!",
                        "I'm growing so fast!",
                        "This fertilizer is the DIRT best!"
                    ],
                    thirsty: [
                        "I'm so thirsty!",
                        "Water you doing? I'm thirsty!",
                        "SOS: Water needed!"
                    ],
                    happy: [
                        "Just leaf me alone, I'm happy!",
                        "I'm having a tree-mendous time!",
                        "Life's a garden, dig it!"
                    ],
                    renamed: [
                        "New name? I hope it's not seedy!",
                        "You can call me anything!",
                        "With that name, I'll be poplar!"
                    ],
                    transformed: [
                        "Look at me now! Unbe-leaf-able!",
                        "New look, same bad plant puns!",
                        "I feel like a different species!"
                    ]
                },
                moody: {
                    watered: [
                        "Thanks, I guess...",
                        "The water reminds me of my tears.",
                        "At least someone cares."
                    ],
                    overwatered: [
                        "Great, now I'm drowning in water too.",
                        "Too much of anything is just pain.",
                        "I'm already saturated with sorrow."
                    ],
                    fertilized: [
                        "Growth is just another form of pain.",
                        "I suppose I'll grow... whatever.",
                        "Forced to change again. Typical."
                    ],
                    thirsty: [
                        "I'm withering... like my soul.",
                        "Thirsty. Like my thirst for meaning.",
                        "Water... if you even care."
                    ],
                    happy: [
                        "I'm not unhappy, I guess.",
                        "The darkness is slightly less today.",
                        "Existing is tolerable right now."
                    ],
                    renamed: [
                        "A new name won't change who I am inside.",
                        "Labels are just society's chains.",
                        "Whatever. Names are meaningless anyway."
                    ],
                    transformed: [
                        "Different outside. Same emptiness inside.",
                        "New form. Same void within.",
                        "Change is inevitable. Like the darkness."
                    ]
                }
            };
            
            // DOM Elements
            const tamagotchiElement = document.getElementById('tamagotchi');
            const plantNameElement = document.getElementById('plantName');
            const plantImageElement = document.getElementById('plantImage');
            const plantImgElement = document.getElementById('plantImg');
            const potImgElement = document.getElementById('potImg');
            const waterLevelElement = document.getElementById('waterLevel');
            const growthLevelElement = document.getElementById('growthLevel');
            const messageElement = document.getElementById('message');
            const waterAnimation = document.getElementById('waterAnimation');
            const fertilizeAnimation = document.getElementById('fertilizeAnimation');
            
            // Buttons
            const waterBtn = document.getElementById('waterBtn');
            const fertilizeBtn = document.getElementById('fertilizeBtn');
            const nameBtn = document.getElementById('nameBtn');
            const changeBtn = document.getElementById('changeBtn');
            const statsBtn = document.getElementById('statsBtn');
            const settingsBtn = document.getElementById('settingsBtn');
            const resetBtn = document.getElementById('resetBtn');
            
            // Modals
            const nameModal = document.getElementById('nameModal');
            const plantModal = document.getElementById('plantModal');
            const statsModal = document.getElementById('statsModal');
            const settingsModal = document.getElementById('settingsModal');
            const resetModal = document.getElementById('resetModal');
            
            // Modal Elements
            const nameInput = document.getElementById('nameInput');
            const saveNameBtn = document.getElementById('saveNameBtn');
            const cancelNameBtn = document.getElementById('cancelNameBtn');
            const plantOptions = document.querySelectorAll('.plant-option');
            const savePlantBtn = document.getElementById('savePlantBtn');
            const cancelPlantBtn = document.getElementById('cancelPlantBtn');
            const statsName = document.getElementById('statsName');
            const statsType = document.getElementById('statsType');
            const statsWater = document.getElementById('statsWater');
            const statsGrowth = document.getElementById('statsGrowth');
            const statsAge = document.getElementById('statsAge');
            const statsWatered = document.getElementById('statsWatered');
            const statsFertilized = document.getElementById('statsFertilized');
            const statsPersonality = document.getElementById('statsPersonality');
            const closeStatsBtn = document.getElementById('closeStatsBtn');
            const themeOptions = document.querySelectorAll('.theme-option');
            const personalityOptions = document.querySelectorAll('.personality-option');
            const saveSettingsBtn = document.getElementById('saveSettingsBtn');
            const cancelSettingsBtn = document.getElementById('cancelSettingsBtn');
            const confirmResetBtn = document.getElementById('confirmResetBtn');
            const cancelResetBtn = document.getElementById('cancelResetBtn');
            
            // Initialize the game
            function init() {
                console.log("Initializing game");
                loadPlant();
                updateDisplay();
                setupEventListeners();
                startGameLoop();
                updateFertilizeButton();
                applyTheme(plant.theme);
                
                // Show initial message
                showMessage(getRandomResponse('happy'), false);
            }
            
            // Load plant data from localStorage
            function loadPlant() {
                try {
                    const savedPlant = localStorage.getItem('tamagotchiPlant');
                    if (savedPlant) {
                        const parsedPlant = JSON.parse(savedPlant);
                        plant = {
                            ...parsedPlant,
                            createdAt: new Date(parsedPlant.createdAt),
                            lastWatered: new Date(parsedPlant.lastWatered),
                            lastFertilized: parsedPlant.lastFertilized ? new Date(parsedPlant.lastFertilized) : null
                        };
                        
                        // Set defaults for new properties if they don't exist
                        if (!plant.theme) plant.theme = "pink";
                        if (!plant.personality) plant.personality = "cheerful";
                        
                        // Convert "emo" to "moody" if needed
                        if (plant.personality === "emo") plant.personality = "moody";
                        
                        // Update maxGrowthStage to 6 if it's different
                        plant.maxGrowthStage = 6;
                        
                        console.log("Loaded plant:", plant);
                    } else {
                        console.log("No saved plant found, using default");
                    }
                } catch (error) {
                    console.error("Error loading plant:", error);
                    // If there's an error, use default plant
                }
            }
            
            // Save plant data to localStorage
            function savePlant() {
                try {
                    localStorage.setItem('tamagotchiPlant', JSON.stringify(plant));
                    console.log("Plant saved");
                } catch (error) {
                    console.error("Error saving plant:", error);
                }
            }
            
            // Reset plant to default state
            function resetPlant() {
                console.log("Resetting plant");
                plant = {
                    name: "Plant Friend",
                    type: "Sunflower",
                    typeName: "Sunflower",
                    waterLevel: 25,
                    growthStage: 1,
                    maxGrowthStage: 6,
                    createdAt: new Date(),
                    lastWatered: new Date(),
                    lastFertilized: null,
                    timesWatered: 0,
                    timesFertilized: 0,
                    theme: "pink",
                    personality: "cheerful"
                };
                
                savePlant();
                updateDisplay();
                applyTheme(plant.theme);
                showMessage("Plant has been reset!");
            }
            
            // Update the display
            function updateDisplay() {
                plantNameElement.textContent = plant.name;
                waterLevelElement.textContent = `${Math.round(plant.waterLevel)}%`;
                growthLevelElement.textContent = plant.growthStage;
                
                // Update plant appearance based on water level and growth stage
                updatePlantAppearance();
                
                // Update fertilize button state
                updateFertilizeButton();
            }
            
            // Update plant appearance
            function updatePlantAppearance() {
                try {
                    // Update based on growth stage
                    const imgPath = `Plant/${plant.type}${plant.growthStage}.png`;
                    console.log("Setting plant image to:", imgPath);
                    
                    // Check if the image element exists
                    if (plantImgElement) {
                        plantImgElement.src = imgPath;
                        plantImgElement.alt = `${plant.typeName} Stage ${plant.growthStage}`;
                    } else {
                        console.error("Plant image element not found");
                    }
                    
                    // Show thirsty message if water level is low
                    if (plant.waterLevel < 30) {
                        showMessage(getRandomResponse('thirsty'), false);
                    } else if (messageElement.textContent === "" || 
                        messageElement.textContent.includes("thirsty") || 
                        messageElement.textContent.includes("happy")) {
                        // Show happy message
                        showMessage(getRandomResponse('happy'), false);
                    }
                } catch (error) {
                    console.error("Error updating plant appearance:", error);
                }
            }
            
            // Update fertilize button state
            function updateFertilizeButton() {
                try {
                    const now = new Date();
                    let canFertilize = true;
                    let timeRemaining = "";
                    
                    if (plant.lastFertilized) {
                        const lastFertilized = new Date(plant.lastFertilized);
                        const timeSinceFertilized = now - lastFertilized;
                        const hoursRemaining = 24 - (timeSinceFertilized / (1000 * 60 * 60));
                        
                        if (hoursRemaining > 0) {
                            canFertilize = false;
                            
                            const hours = Math.floor(hoursRemaining);
                            const minutes = Math.floor((hoursRemaining - hours) * 60);
                            
                            timeRemaining = `${hours}h ${minutes}m`;
                            fertilizeBtn.textContent = timeRemaining;
                        } else {
                            fertilizeBtn.textContent = "FERTILIZE";
                        }
                    } else {
                        fertilizeBtn.textContent = "FERTILIZE";
                    }
                    
                    fertilizeBtn.disabled = !canFertilize;
                } catch (error) {
                    console.error("Error updating fertilize button:", error);
                    // Ensure button is enabled in case of error
                    if (fertilizeBtn) {
                        fertilizeBtn.disabled = false;
                        fertilizeBtn.textContent = "FERTILIZE";
                    }
                }
            }
            
            // Apply theme
            function applyTheme(theme) {
                if (tamagotchiElement) {
                    tamagotchiElement.className = `tamagotchi theme-${theme}`;
                    console.log("Applied theme:", theme);
                }
            }
            
            // Get random response based on personality and type
            function getRandomResponse(type) {
                try {
                    const responses = personalityResponses[plant.personality][type];
                    const randomIndex = Math.floor(Math.random() * responses.length);
                    return responses[randomIndex];
                } catch (error) {
                    console.error("Error getting response:", error);
                    return "Hello!"; // Fallback response
                }
            }
            
            // Setup event listeners
            function setupEventListeners() {
                console.log("Setting up event listeners");
                
                // Water button
                if (waterBtn) {
                    waterBtn.addEventListener('click', function() {
                        console.log("Water button clicked");
                        waterPlant();
                    });
                }
                
                // Fertilize button
                if (fertilizeBtn) {
                    fertilizeBtn.addEventListener('click', function() {
                        console.log("Fertilize button clicked");
                        fertilizePlant();
                    });
                }
                
                // Name button
                if (nameBtn) {
                    nameBtn.addEventListener('click', function() {
                        console.log("Name button clicked");
                        showNameModal();
                    });
                }
                
                // Change plant button
                if (changeBtn) {
                    changeBtn.addEventListener('click', function() {
                        console.log("Change plant button clicked");
                        showPlantModal();
                    });
                }
                
                // Stats button
                if (statsBtn) {
                    statsBtn.addEventListener('click', function() {
                        console.log("Stats button clicked");
                        showStatsModal();
                    });
                }
                
                // Settings button
                if (settingsBtn) {
                    settingsBtn.addEventListener('click', function() {
                        console.log("Settings button clicked");
                        showSettingsModal();
                    });
                }
                
                // Reset button
                if (resetBtn) {
                    resetBtn.addEventListener('click', function() {
                        console.log("Reset button clicked");
                        showResetModal();
                    });
                }
                
                // Save name button
                if (saveNameBtn) {
                    saveNameBtn.addEventListener('click', function() {
                        console.log("Save name button clicked");
                        saveName();
                    });
                }
                
                // Cancel name button
                if (cancelNameBtn) {
                    cancelNameBtn.addEventListener('click', function() {
                        console.log("Cancel name button clicked");
                        hideModal(nameModal);
                    });
                }
                
                // Plant options
                if (plantOptions) {
                    plantOptions.forEach(option => {
                        option.addEventListener('click', function() {
                            console.log("Plant option clicked:", option.dataset.plant);
                            selectPlant(option);
                        });
                    });
                }
                
                // Save plant button
                if (savePlantBtn) {
                    savePlantBtn.addEventListener('click', function() {
                        console.log("Save plant button clicked");
                        savePlantType();
                    });
                }
                
                // Cancel plant button
                if (cancelPlantBtn) {
                    cancelPlantBtn.addEventListener('click', function() {
                        console.log("Cancel plant button clicked");
                        hideModal(plantModal);
                    });
                }
                
                // Close stats button
                if (closeStatsBtn) {
                    closeStatsBtn.addEventListener('click', function() {
                        console.log("Close stats button clicked");
                        hideModal(statsModal);
                    });
                }
                
                // Theme options
                if (themeOptions) {
                    themeOptions.forEach(option => {
                        option.addEventListener('click', function() {
                            console.log("Theme option clicked:", option.dataset.theme);
                            selectTheme(option);
                        });
                    });
                }
                
                // Personality options
                if (personalityOptions) {
                    personalityOptions.forEach(option => {
                        option.addEventListener('click', function() {
                            console.log("Personality option clicked:", option.dataset.personality);
                            selectPersonality(option);
                        });
                    });
                }
                
                // Save settings button
                if (saveSettingsBtn) {
                    saveSettingsBtn.addEventListener('click', function() {
                        console.log("Save settings button clicked");
                        saveSettings();
                    });
                }
                
                // Cancel settings button
                if (cancelSettingsBtn) {
                    cancelSettingsBtn.addEventListener('click', function() {
                        console.log("Cancel settings button clicked");
                        hideModal(settingsModal);
                    });
                }
                
                // Confirm reset button
                if (confirmResetBtn) {
                    confirmResetBtn.addEventListener('click', function() {
                        console.log("Confirm reset button clicked");
                        resetPlant();
                        hideModal(resetModal);
                        hideModal(settingsModal);
                    });
                }
                
                // Cancel reset button
                if (cancelResetBtn) {
                    cancelResetBtn.addEventListener('click', function() {
                        console.log("Cancel reset button clicked");
                        hideModal(resetModal);
                    });
                }
                
                // Name input enter key
                if (nameInput) {
                    nameInput.addEventListener('keyup', function(e) {
                        if (e.key === 'Enter') {
                            console.log("Enter key pressed in name input");
                            saveName();
                        }
                    });
                }
            }
            
            // Start the game loop
            function startGameLoop() {
                console.log("Starting game loop");
                
                // Update plant status every 10 seconds
                setInterval(function() {
                    updatePlantStatus();
                    updateDisplay();
                    savePlant();
                }, 10000);
                
                // Update fertilize button every minute
                setInterval(function() {
                    updateFertilizeButton();
                }, 60000);
            }
            
            // Update plant status
            function updatePlantStatus() {
                try {
                    const now = new Date();
                    const hoursSinceWatered = (now - new Date(plant.lastWatered)) / (1000 * 60 * 60);
                    
                    // Decrease water level over time (about 10% per hour)
                    plant.waterLevel = Math.max(0, plant.waterLevel - (hoursSinceWatered * 10));
                    
                    // Update last watered time to now (to prevent continuous updates)
                    plant.lastWatered = now;
                    
                    console.log("Updated plant status, water level:", plant.waterLevel);
                } catch (error) {
                    console.error("Error updating plant status:", error);
                }
            }
            
            // Water the plant
            function waterPlant() {
                try {
                    // Check if plant is already fully watered
                    if (plant.waterLevel >= 95) {
                        showMessage(getRandomResponse('overwatered'));
                        return;
                    }
                    
                    plant.waterLevel = 100;
                    plant.lastWatered = new Date();
                    plant.timesWatered++;
                    
                    // Show watering animation
                    showWaterAnimation();
                    
                    updateDisplay();
                    savePlant();
                    
                    // Show message
                    showMessage(getRandomResponse('watered'));
                    
                    console.log("Plant watered, new water level:", plant.waterLevel);
                } catch (error) {
                    console.error("Error watering plant:", error);
                }
            }
            
            // Show water animation
            function showWaterAnimation() {
                try {
                    if (waterAnimation) {
                        waterAnimation.classList.add('active');
                        
                        setTimeout(function() {
                            waterAnimation.classList.remove('active');
                        }, 1000);
                    }
                } catch (error) {
                    console.error("Error showing water animation:", error);
                }
            }
            
            // Fertilize the plant
            function fertilizePlant() {
                try {
                    const now = new Date();
                    
                    // Check if enough time has passed since last fertilization
                    if (plant.lastFertilized) {
                        const lastFertilized = new Date(plant.lastFertilized);
                        const hoursSinceFertilized = (now - lastFertilized) / (1000 * 60 * 60);
                        
                        if (hoursSinceFertilized < 24) {
                            showMessage("I've been fertilized recently!");
                            return;
                        }
                    }
                    
                    // Apply fertilizer effects - only fertilizer makes the plant grow
                    if (plant.growthStage < plant.maxGrowthStage) {
                        plant.growthStage++;
                        
                        if (plantImageElement) {
                            plantImageElement.classList.add('growing');
                            
                            setTimeout(function() {
                                plantImageElement.classList.remove('growing');
                            }, 500);
                        }
                        
                        // Show fertilize animation
                        showFertilizeAnimation();
                        
                        // Update plant data
                        plant.lastFertilized = now;
                        plant.timesFertilized++;
                        
                        updateDisplay();
                        savePlant();
                        
                        showMessage(getRandomResponse('fertilized'));
                        console.log("Plant fertilized, new growth stage:", plant.growthStage);
                    } else {
                        showMessage("I'm already fully grown!");
                    }
                } catch (error) {
                    console.error("Error fertilizing plant:", error);
                }
            }
            
            // Show fertilize animation
            function showFertilizeAnimation() {
                try {
                    if (fertilizeAnimation) {
                        fertilizeAnimation.classList.add('active');
                        
                        setTimeout(function() {
                            fertilizeAnimation.classList.remove('active');
                        }, 1000);
                    }
                } catch (error) {
                    console.error("Error showing fertilize animation:", error);
                }
            }
            
            // Show name modal
            function showNameModal() {
                try {
                    if (nameInput && nameModal) {
                        nameInput.value = plant.name;
                        showModal(nameModal);
                        nameInput.focus();
                    }
                } catch (error) {
                    console.error("Error showing name modal:", error);
                }
            }
            
            // Save name
            function saveName() {
                try {
                    if (nameInput) {
                        const newName = nameInput.value.trim();
                        if (newName) {
                            plant.name = newName;
                            updateDisplay();
                            savePlant();
                            hideModal(nameModal);
                            showMessage(getRandomResponse('renamed'));
                            console.log("Plant renamed to:", plant.name);
                        }
                    }
                } catch (error) {
                    console.error("Error saving name:", error);
                }
            }
            
            // Show plant selection modal
            function showPlantModal() {
                try {
                    // Reset selection
                    if (plantOptions) {
                        plantOptions.forEach(option => {
                            option.classList.remove('selected');
                            if (option.dataset.plant === plant.type) {
                                option.classList.add('selected');
                            }
                        });
                    }
                    
                    showModal(plantModal);
                } catch (error) {
                    console.error("Error showing plant modal:", error);
                }
            }
            
            // Select plant
            function selectPlant(option) {
                try {
                    if (plantOptions) {
                        plantOptions.forEach(opt => opt.classList.remove('selected'));
                    }
                    option.classList.add('selected');
                } catch (error) {
                    console.error("Error selecting plant:", error);
                }
            }
            
            // Save plant type
            function savePlantType() {
                try {
                    const selectedOption = document.querySelector('.plant-option.selected');
                    if (selectedOption) {
                        const plantType = selectedOption.dataset.plant;
                        plant.type = plantType;
                        plant.typeName = plantType;
                        plant.maxGrowthStage = plantTypes[plantType].growthStages;
                        
                        // If current growth stage exceeds max for new plant, reset it
                        if (plant.growthStage > plant.maxGrowthStage) {
                            plant.growthStage = 1;
                        }
                        
                        updateDisplay();
                        savePlant();
                        hideModal(plantModal);
                        showMessage(getRandomResponse('transformed'));
                        console.log("Plant type changed to:", plant.type);
                    }
                } catch (error) {
                    console.error("Error saving plant type:", error);
                }
            }
            
            // Show stats modal
            function showStatsModal() {
                try {
                    // Calculate age in days
                    const ageInDays = Math.floor((new Date() - new Date(plant.createdAt)) / (1000 * 60 * 60 * 24));
                    
                    // Update stats
                    if (statsName) statsName.textContent = plant.name;
                    if (statsType) statsType.textContent = plant.typeName;
                    if (statsWater) statsWater.textContent = `${Math.round(plant.waterLevel)}%`;
                    if (statsGrowth) statsGrowth.textContent = `${plant.growthStage} of ${plant.maxGrowthStage}`;
                    if (statsAge) statsAge.textContent = `${ageInDays} days`;
                    if (statsWatered) statsWatered.textContent = `${plant.timesWatered} times`;
                    if (statsFertilized) statsFertilized.textContent = `${plant.timesFertilized} times`;
                    if (statsPersonality) statsPersonality.textContent = plant.personality.charAt(0).toUpperCase() + plant.personality.slice(1);
                    
                    showModal(statsModal);
                } catch (error) {
                    console.error("Error showing stats modal:", error);
                }
            }
            
            // Show settings modal
            function showSettingsModal() {
                try {
                    // Reset selections
                    if (themeOptions) {
                        themeOptions.forEach(option => {
                            option.classList.remove('selected');
                            if (option.dataset.theme === plant.theme) {
                                option.classList.add('selected');
                            }
                        });
                    }
                    
                    if (personalityOptions) {
                        personalityOptions.forEach(option => {
                            option.classList.remove('selected');
                            if (option.dataset.personality === plant.personality) {
                                option.classList.add('selected');
                            }
                        });
                    }
                    
                    showModal(settingsModal);
                } catch (error) {
                    console.error("Error showing settings modal:", error);
                }
            }
            
            // Show reset confirmation modal
            function showResetModal() {
                showModal(resetModal);
            }
            
            // Select theme
            function selectTheme(option) {
                try {
                    if (themeOptions) {
                        themeOptions.forEach(opt => opt.classList.remove('selected'));
                    }
                    option.classList.add('selected');
                } catch (error) {
                    console.error("Error selecting theme:", error);
                }
            }
            
            // Select personality
            function selectPersonality(option) {
                try {
                    if (personalityOptions) {
                        personalityOptions.forEach(opt => opt.classList.remove('selected'));
                    }
                    option.classList.add('selected');
                } catch (error) {
                    console.error("Error selecting personality:", error);
                }
            }
            
            // Save settings
            function saveSettings() {
                try {
                    const selectedTheme = document.querySelector('.theme-option.selected');
                    const selectedPersonality = document.querySelector('.personality-option.selected');
                    
                    if (selectedTheme && selectedPersonality) {
                        plant.theme = selectedTheme.dataset.theme;
                        plant.personality = selectedPersonality.dataset.personality;
                        
                        applyTheme(plant.theme);
                        savePlant();
                        hideModal(settingsModal);
                        
                        showMessage("Settings updated!");
                        console.log("Settings updated - Theme:", plant.theme, "Personality:", plant.personality);
                    }
                } catch (error) {
                    console.error("Error saving settings:", error);
                }
            }
            
            // Show modal
            function showModal(modal) {
                try {
                    if (modal) {
                        modal.classList.add('active');
                    }
                } catch (error) {
                    console.error("Error showing modal:", error);
                }
            }
            
            // Hide modal
            function hideModal(modal) {
                try {
                    if (modal) {
                        modal.classList.remove('active');
                    }
                } catch (error) {
                    console.error("Error hiding modal:", error);
                }
            }
            
            // Show message
            function showMessage(text, autoHide = true) {
                try {
                    if (messageElement) {
                        messageElement.textContent = text;
                        
                        // Clear message after 3 seconds if autoHide is true
                        if (autoHide) {
                            setTimeout(function() {
                                if (plant.waterLevel < 30) {
                                    showMessage(getRandomResponse('thirsty'), false);
                                } else {
                                    showMessage(getRandomResponse('happy'), false);
                                }
                            }, 3000);
                        }
                    }
                } catch (error) {
                    console.error("Error showing message:", error);
                }
            }
            
            // Initialize the game
            init();
        });
    </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'94906259877b593d',t:'MTc0ODc5ODQ1Mi4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script><iframe height="1" width="1" style="position: absolute; top: 0px; left: 0px; border: none; visibility: hidden;"></iframe>

</body></html>